# 风险管理模块 - 使用指南

## 📋 概述

风险管理模块是 Visorq 企业级项目组合管理系统的核心功能之一，帮助项目团队系统化地识别、评估、缓解和监控项目风险。

## 🎯 核心功能

### 1. 风险识别与分类

支持 7 大类风险：
- **进度风险** 📅 - 项目延期、里程碑滞后
- **成本风险** 💰 - 预算超支、成本失控
- **资源风险** 👥 - 人员流失、资源短缺
- **技术风险** ⚙️ - 技术难题、架构缺陷
- **外部风险** 🌐 - 市场变化、政策调整
- **质量风险** ✨ - 质量不达标、缺陷率高
- **范围风险** 📊 - 需求蔓延、范围失控

### 2. 风险评估矩阵 (5x5)

**评估维度**：
- **概率** (Probability): 1-5 级
  - 1 = 极低 (Very Low)
  - 2 = 低 (Low)
  - 3 = 中 (Medium)
  - 4 = 高 (High)
  - 5 = 极高 (Very High)

- **影响** (Impact): 1-5 级
  - 1 = 可忽略 (Negligible)
  - 2 = 轻微 (Minor)
  - 3 = 中等 (Moderate)
  - 4 = 重大 (Major)
  - 5 = 严重 (Severe)

**风险分数** = 概率 × 影响 (1-25)

**优先级自动计算**：
- **极高风险 (Critical)**: 分数 16-25
- **高风险 (High)**: 分数 10-15
- **中风险 (Medium)**: 分数 5-9
- **低风险 (Low)**: 分数 1-4

### 3. 风险状态管理

- **已识别 (Identified)** - 风险刚被发现
- **分析中 (Analyzing)** - 正在评估影响
- **缓解中 (Mitigating)** - 正在执行缓解措施
- **监控中 (Monitoring)** - 持续跟踪观察
- **已解决 (Resolved)** - 风险已消除
- **已接受 (Accepted)** - 决定接受风险

### 4. 缓解措施跟踪

每个风险可以添加多个缓解措施 (Mitigation Actions)：
- 措施描述
- 责任人
- 截止日期
- 执行状态 (待处理/进行中/已完成/已取消)
- 完成日期
- 备注

### 5. 风险历史记录

自动记录所有风险变更：
- 创建时间
- 状态变更
- 概率/影响调整
- 缓解措施添加
- 解决时间

## 🚀 使用流程

### 访问风险管理页面

```
路由: /projects/:projectId/risks
```

例如：`http://localhost:5173/#/projects/proj-001/risks`

### 添加新风险

1. 点击右上角 **"添加风险"** 按钮
2. 填写风险信息：
   - **标题**：简明扼要描述风险
   - **类别**：选择风险类型
   - **描述**：详细说明风险情况
   - **概率**：拖动滑块选择 1-5
   - **影响**：拖动滑块选择 1-5
   - **状态**：默认为"已识别"
   - **预估成本影响**：风险发生可能造成的损失
   - **缓解成本**：缓解风险需要的投入
3. 填写缓解策略和应急计划
4. 添加具体的缓解措施（可选）
5. 点击 **"创建风险"**

### 编辑风险

1. 在风险列表中点击 **编辑图标** (铅笔)
2. 修改风险信息
3. 点击 **"保存更改"**

### 查看风险详情

1. 点击风险卡片右侧的 **下拉箭头**
2. 展开查看：
   - 缓解策略
   - 应急计划
   - 缓解措施列表及执行状态

### 删除风险

1. 点击风险卡片右侧的 **删除图标** (垃圾桶)
2. 确认删除操作

### 筛选风险

使用顶部筛选器：
- **按类别筛选**：进度/成本/资源/技术/外部/质量/范围
- **按状态筛选**：已识别/分析中/缓解中/监控中/已解决/已接受

### 风险矩阵可视化

- 点击矩阵中的单元格查看该区域的风险
- 颜色编码：
  - 🟢 绿色：低风险 (1-4)
  - 🟡 黄色：中风险 (5-9)
  - 🟠 橙色：高风险 (10-15)
  - 🔴 红色：极高风险 (16-25)

## 📊 统计指标

页面顶部显示 4 个关键指标：
1. **总风险数** - 项目中所有风险的总数
2. **活跃风险** - 未解决且未接受的风险数
3. **极高风险** - 优先级为 Critical 的风险数
4. **已解决** - 状态为 Resolved 的风险数

## 💡 最佳实践

### 1. 定期风险评审
- 建议每周或每两周进行一次风险评审会议
- 更新风险状态和评分
- 检查缓解措施的执行进度

### 2. 及时识别新风险
- 项目启动阶段：识别初始风险
- 项目执行阶段：持续监控新风险
- 变更发生时：评估变更带来的风险

### 3. 优先处理高风险
- 优先关注极高风险和高风险
- 为高风险制定详细的缓解计划
- 分配专人负责高风险的跟踪

### 4. 记录完整信息
- 详细描述风险的具体情况
- 说明风险可能造成的影响
- 记录缓解措施的执行情况

### 5. 成本意识
- 评估风险的潜在成本影响
- 权衡缓解成本与风险成本
- 对于低风险可以选择接受而非缓解

## 🔧 技术实现

### 数据模型

```typescript
interface Risk {
    id: string;
    projectId: string;
    category: RiskCategory;
    title: string;
    description: string;
    probability: number; // 1-5
    impact: number; // 1-5
    riskScore: number; // probability × impact
    priority: RiskPriority; // Auto-calculated
    owner: string;
    status: RiskStatus;
    mitigationStrategy: string;
    mitigationActions: RiskMitigationAction[];
    contingencyPlan?: string;
    identifiedDate: string;
    lastReviewDate?: string;
    nextReviewDate?: string;
    resolvedDate?: string;
    estimatedCostImpact?: number;
    mitigationCost?: number;
    history: RiskHistoryEntry[];
}
```

### 核心算法

**风险分数计算**：
```typescript
riskScore = probability × impact
```

**优先级计算**：
```typescript
if (riskScore >= 16) return 'critical';
if (riskScore >= 10) return 'high';
if (riskScore >= 5) return 'medium';
return 'low';
```

**项目整体风险分数**：
```typescript
// 加权平均，优先级越高权重越大
weights = { critical: 4, high: 3, medium: 2, low: 1 }
projectRiskScore = Σ(riskScore × weight) / Σ(weight)
```

## 📈 未来增强

- [ ] 风险趋势分析图表
- [ ] 风险热力图（按时间维度）
- [ ] 自动风险预警通知
- [ ] 风险报告导出 (PDF/Excel)
- [ ] 风险模板库
- [ ] AI 智能风险识别建议
- [ ] 跨项目风险关联分析

## 🆘 常见问题

**Q: 如何区分"缓解策略"和"应急计划"？**
A: 缓解策略是主动降低风险发生概率或影响的措施；应急计划是风险发生后的应对方案。

**Q: 风险分数是如何计算的？**
A: 风险分数 = 概率 × 影响，范围是 1-25。系统会自动计算并分配优先级。

**Q: 可以删除已解决的风险吗？**
A: 建议保留已解决的风险作为历史记录，有助于未来项目的风险识别。

**Q: 如何设置风险的下次评审日期？**
A: 目前版本暂不支持，将在后续版本中添加。

---

**版本**: 1.0  
**最后更新**: 2025-12-11  
**维护团队**: Visorq Development Team
